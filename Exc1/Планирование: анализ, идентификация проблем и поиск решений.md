### Проблемы:
#### 1) **Долгая загрузка системы**
- Операторы жалуются на медленную работу первой страницы MES.
    - Дашборд, где отображается список заказов в работе по статусам, загружается слишком долго, хотя уже была добавлена пагинация и фильтрация.
    - Долгая загрузка страницы мешает операторам вовремя брать заказы, что напрямую влияет на их вознаграждение, так как оплата зависит от числа принятых заказов.

- Рост нагрузки на систему из-за увеличения количества заказов влияет на производительность всех сервисов, связанных с MES.
- Нет решений по оптимизации быстродействия — критически важная функциональность тормозит.

#### 2) **Долгое отображение статусов заказов**
- При увеличении количества заказов обновления их статусов в CRM занимают длительное время, что влияет на отображение актуальной информации.
- Клиенты жалуются на статус "В работе" в CRM (B2C онлайн-магазин), хотя заказ уже завершён или готов. Это вызывает недовольство покупателей и затрудняет работу менеджеров по продажам.
- Текущие проблемы возникают из-за отсутствия механизма быстрого обновления информации через кеширование. Каждый раз информация извлекается из базы данных, что приводит к высокой задержке.

#### 3) **Непонятные проблемы при использовании нашего API**
- Внешние компании, подключившиеся через API после его открытия, ежедневно жалуются на недополученные заказы. Это влияет на партнёрские отношения компании.
- Причины проблем невидимы из-за отсутствия мониторинга и трейсинга. Если ошибка случилась, сложно определить, где произошёл сбой: в очереди RabbitMQ, в CRM, MES или при расчёте стоимости заказа.
- API MES нагружается обработкой запросов от сторонних компаний на расчёт стоимости ювелирных изделий. Рост числа запросов усугубил ситуацию — тайм-ауты становятся частыми, а часть запросов просто теряется.
- Недостаток логирования мешает выяснить, почему сообщения RabbitMQ не доходят до CRM, из-за чего заказы пропадают.

#### 4) **Рост нагрузки на API MES**
- Линейный рост числа заказов (по 100 новых заказов ежемесячно), а также резкий всплеск запросов с подключением API к внешним клиентам вызывает значительное увеличение нагрузки.
- Магазин и CRM используют одну базу данных с MES как источник данных, что приводит к конфликтам между операциями чтения и записи:
    - Клиенты CRM (менеджеры и покупатели) вместе с операциями в API MES одновременно запрашивают статусы и другие данные, что вызывает блокировки или задержки обработки запросов.
    - Производственные процессы MES были готовы к увеличению заказов, но API MES стал узким местом в системе.

#### 5) **Время выполнения заказов существенно выросло**
- Менеджеры получают жалобы от клиентов, что их заказы находятся в ожидании выполнения месяцами вместо обещанных трёх недель.
- Проблема не связана с производственными мощностями (они справляются и готовы поддержать двукратный рост), а кроется в медленной обработке заказов:
    - Заказы из CRM, созданные через RabbitMQ, неправильно или с большим запозданием поступают в MES.
    - Несогласованность данных между системами задерживает их обработку.

- Вторичные процессы, такие как расчёт стоимости или обновление фильтра в CRM, также увеличивают общее время выполнения заказа.

#### 6) **Рост количества критических багов**
- Система MES не справляется с ростом числа запросов, что приводит к увеличению количества системных тайм-аутов и ошибок (включая 500 Internal Server Error).
- Пользователи API регулярно сталкиваются с некорректными или отсутствующими ответами. Это снижает доверие партнёров и приводит к потере контрактов.
- Поддержка со стороны разработчиков работает "вслепую", так как отсутствует централизованное логирование, на основании которого можно было бы быстро выявить причины багов или задержек.

#### 7) **Проблема с наблюдаемостью за системами**
- Отсутствие мониторинга снижает наблюдаемость за состоянием системы.
    - Нет метрик производительности на стороне RabbitMQ: неясно, как работает очередь сообщений.
    - Отсутствует централизованное логирование запросов и ошибок в API MES, что делает сложной диагностику инцидентов.
    - Нет возможности проследить цепочку вызова между CRM → MES → RabbitMQ → API, чтобы определить, на каком этапе произошёл сбой.

- Это осложняет локализацию как функциональных, так и производительных проблем, всё решается реактивно, с большими затратами времени.

### Инициативы:
1) кэширование для увеличения производительности системы
2) логирование для детализации проблемных мест
3) мониторинг для повышения наблюдаемости
4) трейсинг для решения проблемы с заказами

### План на полгода:
1) кэширование информации о статусах заказов для решения проблемы с загрузкой страницы
2) мониторинг и логирование всех сервисов и компонентов
3) трейсинг во всех сервисах